define("tiny_widgethub/options",["exports","editor_tiny/options","./common","./util"],(function(_exports,_options,_common,_util){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.register=_exports.isPluginVisible=_exports.getWidgetDict=_exports.getUserId=_exports.getCourseId=_exports.getAdditionalCss=_exports.getAddValidElements=_exports.getAddCustomElements=void 0;
/**
   * Tiny WidgetHub plugin.
   *
   * @module      tiny_widgethub/plugin
   * @copyright   2024 Josep Mulet Pol <pmulet@iedib.net>
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
const showPlugin=(0,_options.getPluginOptionName)(_common.pluginName,"showplugin"),userId=(0,_options.getPluginOptionName)(_common.pluginName,"userid"),courseId=(0,_options.getPluginOptionName)(_common.pluginName,"courseid"),widgetList=(0,_options.getPluginOptionName)(_common.pluginName,"widgetlist"),shareStyles=(0,_options.getPluginOptionName)(_common.pluginName,"sharestyles"),additionalCss=(0,_options.getPluginOptionName)(_common.pluginName,"additionalcss"),addValidElements=(0,_options.getPluginOptionName)(_common.pluginName,"addvalidelements"),addCustomElements=(0,_options.getPluginOptionName)(_common.pluginName,"addcustomelements");_exports.register=editor=>{const registerOption=editor.options.register;registerOption(showPlugin,{processor:"boolean",default:!0}),registerOption(userId,{processor:"string",default:"-1"}),registerOption(courseId,{processor:"string",default:"-1"}),registerOption(widgetList,{processor:"array",default:[]}),registerOption(shareStyles,{processor:"boolean",default:!0}),registerOption(additionalCss,{processor:"string",default:""}),registerOption(addValidElements,{processor:"string",default:""}),registerOption(addCustomElements,{processor:"string",default:""})};_exports.isPluginVisible=editor=>editor.options.get(showPlugin);const getUserId=editor=>parseInt(editor.options.get(userId));_exports.getUserId=getUserId;_exports.getCourseId=editor=>parseInt(editor.options.get(courseId));_exports.getAdditionalCss=editor=>editor.options.get(additionalCss);_exports.getAddValidElements=editor=>editor.options.get(addValidElements);_exports.getAddCustomElements=editor=>editor.options.get(addCustomElements);let widgetDict=null;_exports.getWidgetDict=editor=>{if(!widgetDict){widgetDict={};let widgets=editor.options.get(widgetList),partials=widgets.filter((e=>"partials"===e.key))[0];partials&&(widgets=widgets.filter((e=>"partials"!==e.key)));const wrappedWidgets=widgets.map((snpt=>new _util.WidgetWrapper(snpt,partials||{}))),userId=getUserId(editor);wrappedWidgets.filter((snpt=>snpt.isFor(userId))).forEach((snpt=>{widgetDict[snpt.key]=snpt}))}return widgetDict}}));

//# sourceMappingURL=options.min.js.map