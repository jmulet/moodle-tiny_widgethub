{"version":3,"file":"contextactions.min.js","sources":["../../src/extension/contextactions.js"],"sourcesContent":["import { addRequires, cleanUnusedRequires } from \"./dependencies\";\n\n/**\n * @param {import(\"../contextInit\").ItemMenuContext} ctx\n * @param {string} type\n * @returns {() => void}\n */\nexport function addImageEffectAction(ctx, type) {\n    return () => {\n        const elem = ctx.path?.elem;\n        if (!elem) {\n            return;\n        }\n        elem.attr(\"data-snptd\", type);\n        addRequires(ctx.editor, [\"/sd/images.min.js\"]);\n    };\n}\n\n/**\n * @param {import(\"../contextInit\").ItemMenuContext} ctx\n * @returns {() => void}\n */\nexport function removeImageEffectsAction(ctx) {\n    return () => {\n        const elem = ctx.path?.elem;\n        if (!elem) {\n            return;\n        }\n        elem.removeAttr(\"data-snptd\");\n        cleanUnusedRequires(ctx.editor);\n    };\n}\n\n/**\n * @param {import(\"../contextInit\").ItemMenuContext} ctx\n * @param {string} iso\n * @returns {() => void} The action to execute\n */\nexport function changeBoxLangAction(ctx, iso) {\n    return () => {\n        const elem = ctx.path?.elem;\n        const widget = ctx.path?.widget;\n        if (!elem || !widget) {\n            return;\n        }\n        const $lateral = elem.find('.iedib-titolLateral');\n        let snippetKey = widget.key;\n        const isTascaExercici = elem.attr('data-proposat') === 'true';\n        let theType;\n        [\"alerta\", \"ampliacio\", \"consell\", \"important\", \"introduccio\"].forEach((ty) => {\n            if (elem.hasClass(\"iedib-\" + ty + \"-border\")) {\n                theType = ty;\n            }\n        });\n        if (isTascaExercici) {\n            snippetKey = 'tasca-exercici';\n        }\n        const I18n = widget.I18n;\n        let langKey = snippetKey === \"capsa-generica\" ? \"msg_\" + theType : \"msg\";\n        if (isTascaExercici) {\n            langKey = 'msg_epr';\n        }\n        if (I18n?.[langKey]?.[iso]) {\n            if (isTascaExercici) {\n                const h4 = elem.find('.iedib-central h4').first();\n                h4.html(I18n[langKey][iso]);\n            } else {\n                $lateral.html(I18n[langKey][iso]);\n                $lateral.append('<span class=\"iedib-' + theType + '-logo\"></span>');\n            }\n        }\n        // Replace data-lang\n        elem.attr('data-lang', iso);\n    };\n}\n\n/**\n * @param {import(\"../contextInit\").ItemMenuContext} ctx\n * @param {string} size\n * @returns {() => void} The action to execute\n */\nexport function changeBoxSizeAction(ctx, size) {\n    return () => {\n        const elem = ctx.path?.elem;\n        const widget = ctx.path?.widget;\n        if (!elem || !widget) {\n            return;\n        }\n        elem.removeClass(\"iedib-capsa-petita iedib-capsa-mitjana iedib-capsa-gran\");\n        elem.addClass(\"iedib-capsa-\" + size);\n    };\n}\n\n/**\n * @param {import(\"../contextInit\").ItemMenuContext} ctx\n * @param {string} severity\n * @returns {() => void} The action to execute\n */\nexport function changeBoxSeverityAction(ctx, severity) {\n    return () => {\n        const elem = ctx.path?.elem;\n        const widget = ctx.path?.widget;\n        if (!elem || !widget) {\n            return;\n        }\n        elem.removeClass(\n            \"iedib-alerta-border iedib-important-border iedib-consell-border iedib-introduccio-border iedib-ampliacio-border\");\n        elem.addClass(\"iedib-\" + severity + \"-border\");\n        const $lateral = elem.find(\".iedib-lateral\");\n        $lateral.removeClass(\"iedib-alerta iedib-important iedib-consell iedib-introduccio iedib-ampliacio\");\n        $lateral.addClass(\"iedib-\" + severity);\n        const lang = elem.attr(\"data-lang\") || \"ca\";\n        let langKey = \"msg_\" + severity;\n        // Change the lateral title\n        if (widget.I18n?.[langKey]?.[lang]) {\n            $lateral.find('.iedib-titolLateral')\n                .html(widget.I18n[langKey][lang]);\n        }\n    };\n}"],"names":["ctx","type","elem","path","_ctx$path","attr","editor","iso","_ctx$path3","widget","_ctx$path4","$lateral","find","snippetKey","key","isTascaExercici","theType","forEach","ty","hasClass","I18n","langKey","_I18n$langKey","first","html","append","severity","_ctx$path7","_ctx$path8","removeClass","addClass","lang","_widget$I18n","_widget$I18n$langKey","size","_ctx$path5","_ctx$path6","_ctx$path2","removeAttr"],"mappings":"+MAOqCA,IAAKC,YAC/B,yBACGC,uBAAOF,IAAIG,iCAAJC,UAAUF,KAClBA,OAGLA,KAAKG,KAAK,aAAcJ,oCACZD,IAAIM,OAAQ,CAAC,+DAwBGN,IAAKO,WAC9B,mDACGL,wBAAOF,IAAIG,kCAAJK,WAAUN,KACjBO,0BAAST,IAAIG,kCAAJO,WAAUD,WACpBP,OAASO,oBAGRE,SAAWT,KAAKU,KAAK,2BACvBC,WAAaJ,OAAOK,UAClBC,gBAAiD,SAA/Bb,KAAKG,KAAK,qBAC9BW,SACH,SAAU,YAAa,UAAW,YAAa,eAAeC,SAASC,KAChEhB,KAAKiB,SAAS,SAAWD,GAAK,aAC9BF,QAAUE,OAGdH,kBACAF,WAAa,wBAEXO,KAAOX,OAAOW,SAChBC,QAAyB,mBAAfR,WAAkC,OAASG,QAAU,SAC/DD,kBACAM,QAAU,WAEVD,MAAAA,4BAAAA,KAAOC,mCAAPC,cAAkBf,QACdQ,gBAAiB,CACNb,KAAKU,KAAK,qBAAqBW,QACvCC,KAAKJ,KAAKC,SAASd,WAEtBI,SAASa,KAAKJ,KAAKC,SAASd,MAC5BI,SAASc,OAAO,sBAAwBT,QAAU,kBAI1Dd,KAAKG,KAAK,YAAaE,iDA0BSP,IAAK0B,gBAClC,uEACGxB,wBAAOF,IAAIG,kCAAJwB,WAAUzB,KACjBO,0BAAST,IAAIG,kCAAJyB,WAAUnB,WACpBP,OAASO,cAGdP,KAAK2B,YACD,mHACJ3B,KAAK4B,SAAS,SAAWJ,SAAW,iBAC9Bf,SAAWT,KAAKU,KAAK,kBAC3BD,SAASkB,YAAY,gFACrBlB,SAASmB,SAAS,SAAWJ,gBACvBK,KAAO7B,KAAKG,KAAK,cAAgB,SACnCgB,QAAU,OAASK,8BAEnBjB,OAAOW,2DAAPY,aAAcX,0CAAdY,qBAAyBF,OACzBpB,SAASC,KAAK,uBACTY,KAAKf,OAAOW,KAAKC,SAASU,+CAnCP/B,IAAKkC,YAC9B,qCACGhC,wBAAOF,IAAIG,kCAAJgC,WAAUjC,KACjBO,0BAAST,IAAIG,kCAAJiC,WAAU3B,OACpBP,MAASO,SAGdP,KAAK2B,YAAY,2DACjB3B,KAAK4B,SAAS,eAAiBI,oDAnEElC,WAC9B,0BACGE,wBAAOF,IAAIG,kCAAJkC,WAAUnC,KAClBA,OAGLA,KAAKoC,WAAW,oDACItC,IAAIM"}