define("tiny_widgethub/extension/contextmenus",["../extension","../util","./contextactions"],(function(_extension,_util,Action){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}Action=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(Action);const SUPPORTED_LANGS=[{iso:"ca",title:"Català"},{iso:"es",title:"Castellà"},{iso:"en",title:"English"},{iso:"fr",title:"Francès"},{iso:"de",title:"Alemany"}],AVAILABLE_EFFECTS=[{name:"zoom",title:"Zoom"},{name:"lightbox",title:"Pantalla completa"}],SUPPORTED_SIZES=[{v:"gran",l:"Gran"},{v:"mitjana",l:"Mitjana"},{v:"petita",l:"Petita"}];(0,_extension.registerMenuItemProvider)((function(ctx){const openInputDialog=function(title,label,initialValue,onSubmit){var _ctx$editor;null===(_ctx$editor=ctx.editor)||void 0===_ctx$editor||_ctx$editor.windowManager.open({title:title,body:{type:"panel",items:[{type:"input",name:"value",label:label}]},buttons:[{type:"submit",text:"Acceptar"}],initialData:{value:initialValue},onSubmit:onSubmit})};return[{name:"imageEffects",condition:"imatge",title:"Efectes d'imatge",subMenuItems:()=>{var _ctx$path;const elem=null===(_ctx$path=ctx.path)||void 0===_ctx$path?void 0:_ctx$path.elem;return elem?elem.attr("data-snptd")?[{type:"menuitem",icon:"remove",text:"Treure",onAction:Action.removeImageEffectsAction(ctx)}]:AVAILABLE_EFFECTS.map((e=>({type:"menuitem",text:e.title,onAction:Action.addImageEffectAction(ctx,e.name)}))):""}},{name:"imageSwitchToSnippet",condition:()=>{var _ctx$path2,_ctx$path2$widget,_ctx$path3;const key=null===(_ctx$path2=ctx.path)||void 0===_ctx$path2||null===(_ctx$path2$widget=_ctx$path2.widget)||void 0===_ctx$path2$widget?void 0:_ctx$path2$widget.key,elem=null===(_ctx$path3=ctx.path)||void 0===_ctx$path3?void 0:_ctx$path3.selectedElement,isImg=void 0!==key&&"imatge"!==key&&"grid-imatge"!==key&&"IMG"===(null==elem?void 0:elem.prop("tagName"));return ctx.path&&isImg&&null!=elem&&elem[0]&&(ctx.path.targetElement=elem),isImg},title:"Convertir a snippet imatge",onAction:Action.imageSwitchToSnippetAction(ctx)},{name:"changeBoxLanguage",condition:/capsa-.*|tasca-exercici/,title:"Idioma",subMenuItems:()=>{var _ctx$path4;const elem=null===(_ctx$path4=ctx.path)||void 0===_ctx$path4?void 0:_ctx$path4.elem;if(!elem)return"";const currentLang=elem.attr("data-lang")??"";return SUPPORTED_LANGS.map((_ref=>{let{iso:iso,title:title}=_ref;return{type:"menuitem",text:title,icon:iso===currentLang?"checkmark":void 0,onAction:Action.changeBoxLangAction(ctx,iso)}}))}},{name:"changeBoxSize",condition:/^capsa-.*|^tasca-exercici$/,title:"Mida",subMenuItems:()=>{var _ctx$path5,_ctx$path6,_findVariableByName;const elem=null===(_ctx$path5=ctx.path)||void 0===_ctx$path5?void 0:_ctx$path5.elem,widget=null===(_ctx$path6=ctx.path)||void 0===_ctx$path6?void 0:_ctx$path6.widget;if(!elem||!widget)return"";return((null===(_findVariableByName=(0,_util.findVariableByName)("mida",widget.parameters))||void 0===_findVariableByName?void 0:_findVariableByName.options)||SUPPORTED_SIZES).map((e=>({type:"menuitem",text:e.l??e,icon:elem.hasClass("iedib-capsa-"+(e.v??e))?"checkmark":void 0,onAction:Action.changeBoxSizeAction(ctx,e.v??e)})))}},{name:"changeBoxSeverity",condition:"capsa-generica",title:"Tipus",subMenuItems:()=>{var _ctx$path7,_ctx$path8,_findVariableByName2;const elem=null===(_ctx$path7=ctx.path)||void 0===_ctx$path7?void 0:_ctx$path7.elem,widget=null===(_ctx$path8=ctx.path)||void 0===_ctx$path8?void 0:_ctx$path8.widget;if(!elem||!widget)return"";return((null===(_findVariableByName2=(0,_util.findVariableByName)("tipus",widget.parameters))||void 0===_findVariableByName2?void 0:_findVariableByName2.options)||[]).map((e=>({type:"menuitem",text:e.l??e,icon:elem.hasClass("iedib-"+(e.v??e)+"-border")?"checkmark":void 0,onAction:Action.changeBoxSeverityAction(ctx,e.v??e)})))}},{name:"switchBoxRowsExample",condition:"capsa-exemple-cols",title:"Convertir a exemple 2 files",onAction:Action.switchBoxRowsExampleAction(ctx)},{name:"switchBoxSimpleExample",condition:"capsa-exemple-rows",title:"Convertir a exemple simple",onAction:Action.switchBoxSimpleExampleAction(ctx)},{name:"numberedListNestedMenu",condition:()=>{var _ctx$path9;const selectedElement=null===(_ctx$path9=ctx.path)||void 0===_ctx$path9?void 0:_ctx$path9.selectedElement,target=null==selectedElement?void 0:selectedElement.closest("ol");return ctx.path&&null!=target&&target[0]&&(ctx.path.targetElement=target),void 0!==(null==target?void 0:target[0])},icon:"list-num-default",title:"Llista",subMenuItems:()=>{var _ctx$path10,_ctx$path10$targetEle;return[{type:"menuitem",text:"Embellit",icon:(null===(_ctx$path10=ctx.path)||void 0===_ctx$path10||null===(_ctx$path10$targetEle=_ctx$path10.targetElement)||void 0===_ctx$path10$targetEle?void 0:_ctx$path10$targetEle.hasClass("iedib-falist"))?"checkmark":void 0,onAction:()=>{var _ctx$path11;console.log("beauty action");const $target=null===(_ctx$path11=ctx.path)||void 0===_ctx$path11?void 0:_ctx$path11.targetElement;if(!$target)return;$target.toggleClass("iedib-falist");const startAt=$target.attr("start")||"1";if($target.hasClass("iedib-falist")){const beginAt=parseInt(startAt);$target.css("counter-reset","iedibfalist-counter "+(beginAt-1))}else $target.css("counter-reset","")}},{type:"menuitem",text:"Comença a",onAction:()=>{var _ctx$path12,_ctx$path12$targetEle;console.log("start at");const startAt1=(null===(_ctx$path12=ctx.path)||void 0===_ctx$path12||null===(_ctx$path12$targetEle=_ctx$path12.targetElement)||void 0===_ctx$path12$targetEle?void 0:_ctx$path12$targetEle.attr("start"))??"1";openInputDialog("Comença la numeració a ...","",startAt1,(api=>{var _ctx$path13;api.close();const $target=null===(_ctx$path13=ctx.path)||void 0===_ctx$path13?void 0:_ctx$path13.targetElement;if(!$target)return;const startAt2=api.getData().value??"1",beginAt3=(0,_util.convertInt)(startAt2,1);$target.attr("start",beginAt3),$target.css("counter-reset","iedibfalist-counter "+(beginAt3-1))}))}}]}},{name:"tablesMaxWidthMenu",condition:"taula-predefinida,taula-bs",title:"Amplada taula",onAction:()=>{var _ctx$path14;const $target=null===(_ctx$path14=ctx.path)||void 0===_ctx$path14?void 0:_ctx$path14.elem;if(!$target)return;const startAt1=($target.css("max-width")||"-1").replace("px","");openInputDialog("Amplada màxima en (px)","-1=sense limit",startAt1,(api=>{var _ctx$path15;const $target=null===(_ctx$path15=ctx.path)||void 0===_ctx$path15?void 0:_ctx$path15.elem;if(!$target)return;const maxwidth=(0,_util.convertInt)(api.getData().value,0);maxwidth>0?$target.css("max-width",maxwidth+"px"):$target.css("max-width",""),api.close()}))}}]}))}));

//# sourceMappingURL=contextmenus.min.js.map