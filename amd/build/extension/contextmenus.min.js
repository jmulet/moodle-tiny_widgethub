define("tiny_widgethub/extension/contextmenus",["../extension","../util","./contextactions"],(function(_extension,_util,Action){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}Action=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(Action);const SUPPORTED_LANGS=[{iso:"ca",title:"Català"},{iso:"es",title:"Castellà"},{iso:"en",title:"English"},{iso:"fr",title:"Francès"},{iso:"de",title:"Alemany"}],AVAILABLE_EFFECTS=[{name:"zoom",title:"Zoom"},{name:"lightbox",title:"Pantalla completa"}],SUPPORTED_SIZES=[{v:"gran",l:"Gran"},{v:"mitjana",l:"Mitjana"},{v:"petita",l:"Petita"}];(0,_extension.registerMenuItemProvider)((function(ctx){const openInputDialog=function(title,label,initialValue,onSubmit){var _ctx$editor;null===(_ctx$editor=ctx.editor)||void 0===_ctx$editor||_ctx$editor.windowManager.open({title:title,body:{type:"panel",items:[{type:"input",name:"value",label:label}]},buttons:[{type:"submit",text:"Acceptar"}],initialData:{value:initialValue},onSubmit:onSubmit})},twoColumnsNestedMenu={name:"twoColumnsNestedMenu",condition:"two-cols",title:"Mida columnes",subMenuItems:()=>{var _ctx$path9,_ctx$path10,_elem$find$attr;const elem=null===(_ctx$path9=ctx.path)||void 0===_ctx$path9?void 0:_ctx$path9.elem,widget=null===(_ctx$path10=ctx.path)||void 0===_ctx$path10?void 0:_ctx$path10.widget;if(!elem||!widget)return"";const menuItems=[{type:"menuitem",text:"A una columna",onAction:Action.changeColumnWidth.bind({ctx:ctx,colSpan:0})}],firstSpan=((null===(_elem$find$attr=elem.find("div:first-child").attr("class"))||void 0===_elem$find$attr?void 0:_elem$find$attr.split(" "))??[]).filter((c=>c.startsWith("span"))).map((c=>c.replace("span","")))[0];for(let i=2;i<12;i+=2){const tpc=parseInt((100*i/12).toFixed(0)),label=tpc+"% | "+(100-tpc)+"%";let isCurrent=firstSpan&&(0,_util.convertInt)(firstSpan,0)==i;menuItems.push({type:"menuitem",text:label,icon:isCurrent?"checkmark":void 0,onAction:Action.changeColumnWidth.bind({ctx:ctx,colSpan:i})})}return menuItems}};return[{name:"imageEffects",condition:"imatge",title:"Efectes d'imatge",subMenuItems:()=>{var _ctx$path;const elem=null===(_ctx$path=ctx.path)||void 0===_ctx$path?void 0:_ctx$path.elem;return elem?elem.attr("data-snptd")?[{type:"menuitem",icon:"remove",text:"Treure",onAction:Action.removeImageEffectsAction.bind({ctx:ctx})}]:AVAILABLE_EFFECTS.map((e=>({type:"menuitem",text:e.title,onAction:Action.addImageEffectAction.bind({ctx:ctx,type:e.name})}))):""}},{name:"imageSwitchToSnippet",condition:()=>{var _ctx$path2,_ctx$path2$widget,_ctx$path3;const key=null===(_ctx$path2=ctx.path)||void 0===_ctx$path2||null===(_ctx$path2$widget=_ctx$path2.widget)||void 0===_ctx$path2$widget?void 0:_ctx$path2$widget.key,elem=null===(_ctx$path3=ctx.path)||void 0===_ctx$path3?void 0:_ctx$path3.selectedElement,isImg=void 0!==key&&"imatge"!==key&&"grid-imatge"!==key&&"IMG"===(null==elem?void 0:elem.prop("tagName"));return ctx.path&&isImg&&null!=elem&&elem[0]&&(ctx.path.targetElement=elem),isImg},title:"Convertir a snippet imatge",onAction:Action.imageSwitchToSnippetAction.bind({ctx:ctx})},{name:"changeBoxLanguage",condition:/capsa-.*|tasca-exercici/,title:"Idioma",subMenuItems:()=>{var _ctx$path4;const elem=null===(_ctx$path4=ctx.path)||void 0===_ctx$path4?void 0:_ctx$path4.elem;if(!elem)return"";const currentLang=elem.attr("data-lang")??"";return SUPPORTED_LANGS.map((_ref=>{let{iso:iso,title:title}=_ref;return{type:"menuitem",text:title,icon:iso===currentLang?"checkmark":void 0,onAction:Action.changeBoxLangAction.bind({ctx:ctx,iso:iso})}}))}},{name:"changeBoxSize",condition:/^capsa-.*|^tasca-exercici$/,title:"Mida",subMenuItems:()=>{var _ctx$path5,_ctx$path6,_findVariableByName;const elem=null===(_ctx$path5=ctx.path)||void 0===_ctx$path5?void 0:_ctx$path5.elem,widget=null===(_ctx$path6=ctx.path)||void 0===_ctx$path6?void 0:_ctx$path6.widget;if(!elem||!widget)return"";return((null===(_findVariableByName=(0,_util.findVariableByName)("mida",widget.parameters))||void 0===_findVariableByName?void 0:_findVariableByName.options)||SUPPORTED_SIZES).map((e=>({type:"menuitem",text:e.l??e,icon:elem.hasClass("iedib-capsa-"+(e.v??e))?"checkmark":void 0,onAction:Action.changeBoxSizeAction.bind({ctx:ctx,size:e.v??e})})))}},{name:"changeBoxSeverity",condition:"capsa-generica",title:"Tipus",subMenuItems:()=>{var _ctx$path7,_ctx$path8,_findVariableByName2;const elem=null===(_ctx$path7=ctx.path)||void 0===_ctx$path7?void 0:_ctx$path7.elem,widget=null===(_ctx$path8=ctx.path)||void 0===_ctx$path8?void 0:_ctx$path8.widget;if(!elem||!widget)return"";return((null===(_findVariableByName2=(0,_util.findVariableByName)("tipus",widget.parameters))||void 0===_findVariableByName2?void 0:_findVariableByName2.options)||[]).map((e=>({type:"menuitem",text:e.l??e,icon:elem.hasClass("iedib-"+(e.v??e)+"-border")?"checkmark":void 0,onAction:Action.changeBoxSeverityAction.bind({ctx:ctx,severity:e.v??e})})))}},{name:"switchBoxRowsExample",condition:"capsa-exemple-cols",title:"Convertir a exemple 2 files",onAction:Action.switchBoxRowsExampleAction.bind({ctx:ctx})},{name:"switchBoxSimpleExample",condition:"capsa-exemple-rows",title:"Convertir a exemple simple",onAction:Action.switchBoxSimpleExampleAction.bind({ctx:ctx})},{name:"accordionIndependentBehavior",condition:"desplegable2",title:"Comportament",subMenuItems:()=>{var _ctx$path16;const $target=null===(_ctx$path16=ctx.path)||void 0===_ctx$path16?void 0:_ctx$path16.elem;if(!$target)return"";const isDependentBehavior=null!==($target.find("div.accordion-body").attr("data-parent")??null);return[!1,!0].map((opt=>({type:"menuitem",text:opt?"Independents":"Dependents",icon:isDependentBehavior===opt?void 0:"checkmark",onAction:Action.setAccordionBehavior.bind({ctx:ctx,isDependentBehavior:opt})})))}},{name:"numberedListNestedMenu",condition:()=>{var _ctx$path11;const selectedElement=null===(_ctx$path11=ctx.path)||void 0===_ctx$path11?void 0:_ctx$path11.selectedElement,target=null==selectedElement?void 0:selectedElement.closest("ol");return ctx.path&&null!=target&&target[0]&&(ctx.path.targetElement=target),void 0!==(null==target?void 0:target[0])},icon:"list-num-default",title:"Llista",subMenuItems:()=>{var _ctx$path12,_ctx$path12$targetEle;return[{type:"menuitem",text:"Embellit",icon:(null===(_ctx$path12=ctx.path)||void 0===_ctx$path12||null===(_ctx$path12$targetEle=_ctx$path12.targetElement)||void 0===_ctx$path12$targetEle?void 0:_ctx$path12$targetEle.hasClass("iedib-falist"))?"checkmark":void 0,onAction:()=>{var _ctx$path13;const $target=null===(_ctx$path13=ctx.path)||void 0===_ctx$path13?void 0:_ctx$path13.targetElement;if(!$target)return;$target.toggleClass("iedib-falist");const startAt=$target.attr("start")||"1";if($target.hasClass("iedib-falist")){const beginAt=parseInt(startAt);$target.css("counter-reset","iedibfalist-counter "+(beginAt-1))}else $target.css("counter-reset","")}},{type:"menuitem",text:"Comença a",onAction:()=>{var _ctx$path14,_ctx$path14$targetEle;const startAt1=(null===(_ctx$path14=ctx.path)||void 0===_ctx$path14||null===(_ctx$path14$targetEle=_ctx$path14.targetElement)||void 0===_ctx$path14$targetEle?void 0:_ctx$path14$targetEle.attr("start"))??"1";openInputDialog("Comença la numeració a ...","",startAt1,(api=>{var _ctx$path15;api.close();const $target=null===(_ctx$path15=ctx.path)||void 0===_ctx$path15?void 0:_ctx$path15.targetElement;if(!$target)return;const startAt2=api.getData().value??"1",beginAt3=(0,_util.convertInt)(startAt2,1);$target.attr("start",beginAt3),$target.css("counter-reset","iedibfalist-counter "+(beginAt3-1))}))}}]}},twoColumnsNestedMenu,{name:"tablesMaxWidthMenu",condition:"taula-predefinida,taula-bs",title:"Amplada taula",onAction:()=>{var _ctx$path17;const $target=null===(_ctx$path17=ctx.path)||void 0===_ctx$path17?void 0:_ctx$path17.elem;if(!$target)return;const startAt1=($target.css("max-width")||"-1").replace("px","").replace("none","-1");openInputDialog("Amplada màxima en (px)","-1=sense limit",startAt1,(api=>{var _ctx$path18;const $target=null===(_ctx$path18=ctx.path)||void 0===_ctx$path18?void 0:_ctx$path18.elem;if(!$target)return;const maxwidth=(0,_util.convertInt)(api.getData().value.replace("px","").trim(),0);maxwidth>0?$target.css("max-width",maxwidth+"px"):$target.css("max-width",""),api.close()}))}},{name:"convertToBsTableMenu",condition:"taula-bs",title:"Convertir a taula Bootstrap",onAction:Action.convert2BootstrapTable.bind({ctx:ctx})},{name:"convertToPredefinedTableMenu",condition:"taula-predefinida",title:"Convertir a taula predefinida",onAction:Action.convert2PrefefinedTable.bind({ctx:ctx})},{name:"responsivenessNestedMenu",condition:"taula-bs",title:"Responsivitat",subMenuItems:()=>{var _ctx$path19;const $target=null===(_ctx$path19=ctx.path)||void 0===_ctx$path19?void 0:_ctx$path19.elem;if(!$target)return"";return[{type:"menuitem",text:$target.parent().hasClass("table-responsible")?"Treure":"Afegir",onAction:Action.toggleBootstapTableResponsiveness.bind({ctx:ctx})}]}},{name:"tablesHeaderNestedMenu",condition:"taula-predefinida,taula-bs",title:"Capçalera",subMenuItems:()=>{var _ctx$path20;const $target=null===(_ctx$path20=ctx.path)||void 0===_ctx$path20?void 0:_ctx$path20.elem;if(!$target)return"";return[{type:"menuitem",text:$target.find("thead").length>0?"Treure":"Afegir",onAction:Action.toggleTableHeader.bind({ctx:ctx})}]}},{name:"tablesFooterNestedMenu",condition:"taula-predefinida,taula-bs",title:"Peu de taula",subMenuItems:()=>{var _ctx$path21;const $target=null===(_ctx$path21=ctx.path)||void 0===_ctx$path21?void 0:_ctx$path21.elem;if(!$target)return"";return[{type:"menuitem",text:$target.find("tfoot").length>0?"Treure":"Afegir",onAction:Action.toggleTableFooter.bind({ctx:ctx})}]}}]}))}));

//# sourceMappingURL=contextmenus.min.js.map