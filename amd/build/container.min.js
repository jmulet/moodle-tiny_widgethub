define("tiny_widgethub/container",["exports","./controller/widgetParamsCtrl","./controller/widgetPickerCtrl","./controller/formCtrl","./service/modalSrv","core/mustache","./service/templateSrv","./service/userStorageSrv","jquery","editor_tiny/utils","editor_tiny/options","./controller/widgetPropertiesCtrl","./options"],(function(_exports,_widgetParamsCtrl,_widgetPickerCtrl,_formCtrl,_modalSrv2,_mustache2,_templateSrv2,_userStorageSrv,_jquery,_utils,_options,_widgetPropertiesCtrl,_options2){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}let _templateSrv,_ejs;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.ejsLoader=_exports.DIContainer=void 0,_modalSrv2=_interopRequireDefault(_modalSrv2),_mustache2=_interopRequireDefault(_mustache2),_templateSrv2=_interopRequireDefault(_templateSrv2),_userStorageSrv=_interopRequireDefault(_userStorageSrv),_jquery=_interopRequireDefault(_jquery),_widgetPropertiesCtrl=_interopRequireDefault(_widgetPropertiesCtrl);const ejsLoader=()=>_ejs?Promise.resolve(_ejs):new Promise(((resolve,reject)=>{window.require(["tiny_widgethub/ejs-lazy"],(ejsModule=>{_ejs=ejsModule,_ejs?resolve(_ejs):reject()}),reject)}));_exports.ejsLoader=ejsLoader;_exports.DIContainer=class{editor;_widgetPickCtrl;_userStorageInstances={};_editorOptions;constructor(editor){this.editor=editor}get editorOptions(){return this._editorOptions=this._editorOptions??new _options2.EditorOptions(this),this._editorOptions}get widgetParamsFactory(){return widget=>new _widgetParamsCtrl.WidgetParamsCtrl(this,widget)}get widgetPickCtrl(){return this._widgetPickCtrl=this._widgetPickCtrl??new _widgetPickerCtrl.WidgetPickerCtrl(this),this._widgetPickCtrl}get widgetPropertiesCtrl(){return this._widgetPropertiesCtrl=this._widgetPropertiesCtrl??new _widgetPropertiesCtrl.default(this),this._widgetPropertiesCtrl}get formCtrl(){return this._formCtrl=this._formCtrl??new _formCtrl.FormCtrl(this),this._formCtrl}get modalSrv(){return _modalSrv2.default}get templateSrv(){return _templateSrv=_templateSrv||new _templateSrv2.default(this),_templateSrv}get iStorage(){return{localStorage:localStorage,sessionStorage:sessionStorage}}get userStorage(){const userId=this.editorOptions.userId,courseId=this.editorOptions.courseId,key=userId+"_"+courseId;return this._userStorageInstances[key]||(this._userStorageInstances[key]=new _userStorageSrv.default(this,userId,courseId)),this._userStorageInstances[key]}get mustache(){return _mustache2.default}get ejsLoader(){return ejsLoader}get fileSrv(){return this._fileSrv=this._fileSrv||{getImagePicker:()=>(0,_options.getFilePicker)(this.editor,"image"),displayImagePicker:()=>(0,_utils.displayFilepicker)(this.editor,"image")},this._fileSrv}get jQuery(){return _jquery.default}}}));

//# sourceMappingURL=container.min.js.map